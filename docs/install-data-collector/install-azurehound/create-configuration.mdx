---
title: Create an AzureHound Configuration
description: Learn how to create a configuration file for AzureHound Enterprise data collection.
---

<img noZoom src="/assets/enterprise-edition-pill-tag.svg" alt="Applies to BloodHound Enterprise only"/>

To complete the configuration process, you must have the following information:

| Item | Description |
| --- | --- |
| Directory (tenant) ID | Identifies the Microsoft Entra ID instance where you must [register](/install-data-collector/install-azurehound/azure-configuration) the AzureHound Enterprise application. |
| Application (client) ID | Identifies the AzureHound Enterprise [app registration](/install-data-collector/install-azurehound/azure-configuration) that you must create in the Microsoft Entra admin center. |
| AzureHound token ID | Identifies the AzureHound Enterprise [collector client](/collect-data/enterprise-collection/create-collector) that you must create in BloodHound Enterprise. |
| AzureHound token | Provides the authentication key for the AzureHound Enterprise [collector client](/collect-data/enterprise-collection/create-collector) that you must create in BloodHound Enterprise. |

## Download AzureHound Enterprise

1.  Log into your BloodHound Enterprise tenant.

1.  In the left menu, click <Icon icon="download" icontype="regular" /> **Download Collectors**.

1.  Download the AzureHound Enterprise ZIP archive.

    <Note>Choose the option suitable for your system's architecture (ARM64 or AMD64).</Note>

1.  Extract the contents of the ZIP archive to a working directory on the system where you plan to run the AzureHound Enterprise binary.

## Configure Azure

1.  Run `azurehound.exe -h` to see all available options.

    ```text
    C:\Users\Administrator.ROOT\Downloads\azurehound-v2.0.5\azurehound-windows-amd64>azurehound.exe -h
    AzureHound v2.0.5
    Created by the BloodHound Enterprise team - https://bloodhoundenterprise.io

    The official tool for collecting Azure data for BloodHound and BloodHound Enterprise

    Usage:
      azurehound [command]

    Available Commands:
      completion   Generate the autocompletion script for the specified shell
      configure    Configure AzureHound
      help         Help about any command
      install      Installs AzureHound as a system service for BloodHound Enterprise
      list         Lists Azure Objects
      start        Start Azure data collection service for BloodHound Enterprise
      uninstall    Removes AzureHound as a system service

    Flags:
      -c, --config string        AzureHound configuration file (default: C:\Users\Administrator.ROOT\.config\azurehound\config.json)
      -h, --help                 help for azurehound
          --json                 Output logs as json
      -j, --jwt string           Use an acquired JWT to authenticate into Azure
          --log-file string      Output logs to this file
          --proxy string         Sets the proxy URL for the AzureHound service
      -r, --refresh-token string Use an acquired refresh token to authenticate into Azure
      -v, --verbosity int        AzureHound verbosity level (defaults to 0) [Min: -1, Max: 2]
          --version              version for azurehound

    Use "azurehound [command] --help" for more information about a command.
    ```

1.  Run `azurehound.exe configure` and select the Azure region your organization's tenant is hosted in.

    <Note>Most organizations are using the `cloud` region.</Note>

    ```text
    C:\Users\Administrator.ROOT\Downloads\azurehound-v2.0.5\azurehound-windows-amd64>azurehound.exe configure
    AzureHound v2.0.5
    Created by the BloodHound Enterprise team - https://bloodhoundenterprise.io

    Use the arrow keys to navigate: ↓ ↑ ← →
    ? Azure Region:
      china
    > cloud
      germany
      usgov14
      usgov15
    ```

1.  Type in your Azure tenant ID.

    ```text
    Directory (tenant) ID: b82887fc-338d-44ab-97d6-ac32d060ad7e
    ```

1.  Type in the application ID you saved when creating the AzureHound application.

    ```text
    Application (client) ID: 18a7b927-9905-484e-8b17-c09630ce8ff2
    ```

## Configure AzureHound authentication

1.  Choose your desired authentication mechanism.

    <Note>We **highly** recommend certificate-based authentication.</Note>

    ```text
    Use the arrow keys to navigate: ↓ ↑ ← →
    ? Authentication Method:
      > Certificate
        Client Secret
        Username and Password
    ```

1. If using Certificate authentication: press **Enter** or type `Y` to create a new certificate and key.

    ```text
    Authentication Method: Certificate
    ? Generate Certificate and Key? [Y/n]
    ```

    <Note>
    - The certificate generated by AzureHound expires after one year.
    - If using a certificate issued by another authority, AzureHound supports certificates with the following:
      - PEM encoded
      - RSA 256
      - PKCS#8 or PKCS#5
    </Note>

1. If using Certificate authentication: if desired, provide a password for the secret key.

    ```text
    Authentication Method: Certificate
    v Private Key Passphrase (optional):
    ```

1. Hit Enter, or type 'y', to set up a connection to BloodHound Enterprise.

    ```text
    ? Setup connection to BloodHound Enterprise? [Y/n]
    ```

1. Type in the full URL of your BloodHound Enterprise tenant.

    ```text
    v BloodHound Enterprise URL: https://enterprise.bloodhoundenterprise.io/
    ```

## Configure AzureHound collector client

1. Create an AzureHound collector client by following [Create a BloodHound Enterprise collector client](/collect-data/enterprise-collection/create-collector). Continue to the next step when you have the **Token ID** and **Token**.

1. Type in the client collector's **Token ID** from the previous step.

    ```text
    v BloodHound Enterprise Token ID: bb7b957f-2508-400b-971e-6a1857cc0101
    ```

1. Type in the client collector's **Token** key from the collector client.

    ```text
    v BloodHound Enterprise Token: ****************************************
    ```

1. Decide if you want to use a proxy URL. Most organizations will not use this feature.

    ```text
    ? Set proxy URL? [y/N]
    ```

1. Hit Enter, or type 'y', to set up local logging.

    ```text
    ? Setup AzureHound logging? [Y/n]
    ```

## Configure AzureHound logging

1. Select the logging verbosity, as a start we recommend **Default**.

    ```text
    Use the arrow keys to navigate: ↓ ↑ ← →
    ? Verbosity:
        Disabled      
      > Default
        Debug
        Trace
    ```

1. Type a log file name.

    You can also enter file name as a full path. If not specifying a path; AzureHound will output logs to the specified file name within the same directory as the AzureHound binary.

    ```text
    v Log file (optional): azurehound.log
    ```

1. Decide if AzureHound should generate JSON-structured logs.

    ```text
    ? Enable Structured Logs? [y/N]
    ```

## Finalize configuration

1. When completed, a settings summary is shown.

1. If using Certificate authentication; the summary also includes the location of the certificate to complete the configuration within Azure.

    ```text
    Configuration written to C:\Users\Administrator.ROOT\.config\azurehound\config.json
    Key written to C:\Users\Administrator.ROOT\.config\azurehound\key.pem
    Certificate written to C:\Users\Administrator.ROOT\.config\azurehound\cert.pem

    Ensure certificate is uploaded to your application's client credentials
    ```

1. Continue to [Run and Upgrade AzureHound (Windows, Docker, or Kubernetes)](/install-data-collector/install-azurehound/installation-options).
