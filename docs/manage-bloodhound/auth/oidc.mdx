---
title: OIDC in BloodHound
description: BloodHound supports OIDC for Single Sign On to authenticate users to your tenant environment.
---

import snip_auth_config_1 from '/snippets/auth/auth_config_steps_1.mdx';
import snip_auth_config_2 from '/snippets/auth/auth_config_steps_2.mdx';
import snip_auth_users from '/snippets/auth/auth_configure_users.mdx';
import snip_auth_unique_email from '/snippets/auth/auth_unique_email.mdx';
import snip_role_mapping from '/snippets/auth/auth_role_mapping.mdx';
import snip_icons from '/snippets/auth/icons_list.mdx';

<img noZoom src="/assets/enterprise-AND-community-edition-pill-tag.svg" alt="Applies to BloodHound Enterprise and CE"/>

You can configure multiple SSO providers within your tenant if necessary.

This page provides the overall steps to configure an OIDC provider within BloodHound. The examples on this page use Okta as the OIDC provider for demonstration purposes.

<Note>
Entra ID is not currently supported with BloodHound's OIDC implementation. Use the [SAML configuration](/manage-bloodhound/auth/saml-entra-id) instead.
</Note>

## Order of Operations

You must configure OIDC in BloodHound in the following order:

1.  Determine the Identity Provider (IDP) name you will use for the OIDC configuration.

    The same value must be configured in both the IDP and BloodHound. The BloodHound callback URL will include this value.

1.  Configure the IDP for BloodHound.

    See the [Configure Okta](#configure-okta) section below for configuring Okta as your OIDC provider.

1.  Create the OIDC configuration in BloodHound.

1.  Create new users or modify existing users using the UI or via the newly created OIDC provider.

    <snip_auth_unique_email auth_mode="OIDC"/>

<snip_role_mapping auth_mode="OIDC"/>

<snip_icons/>

## Configure Okta

To configure Okta as your OIDC provider:

<Steps>
  <Step title="Create a new Okta application">

    Follow the [Okta documentation](https://help.okta.com/oie/en-us/content/topics/apps/apps_app_integration_wizard_oidc.htm) to create a new application.

    <Note>Set your application type to **SPA** (Single Page Application) or **Native**.</Note>

  </Step>
  <Step title="Configure the Okta application">

    When configuring the Okta application, use the following settings:

    | Field | Value |
    |-------|-------|
    | **Login redirect** | `https://{domainname}/api/v2/sso/{chosenProviderName}/callback`<br/><br/>**Example**: `https://test.bloodhoundenterprise.io/api/v2/sso/bhestandard/callback` |
    | **Logout redirect** | `https://{domainname}/`<br/><br/>**Example**: `https://test.bloodhoundenterprise.io/` |
    
    <Tip>
    Note the following values:

    - **Client ID**
    - **Issuer URL**

    You'll use the **Client ID** from the Okta _Client Credentials_ and the **Issuer URL** from the Okta _Authorization Server_ when you [configure BloodHound](/manage-bloodhound/auth/oidc#configure-bloodhound).
    </Tip>
  </Step>
  <Step title="Create custom claims">  
    You may need to [configure custom claims](https://help.okta.com/oie/en-us/content/topics/apps/federated-claims-overview.htm) to ensure that BloodHound properly populates users' first and last names and the correct role.
    
    Go to **Security** > **API** > **Authorization Servers** > **Claims** and create the following claims:
    <Tabs>
      <Tab title="First name">

      | Field | Setting |
      |-----------|---------|
      | **Name** | First_Name |
      | **Include in token type** | ID Token → Always |
      | **Value type** | Expression |
      | **Value** | `user.firstName` |
      | **Include in** | Any scope (or Profile) |
        
      </Tab>
      <Tab title="Last name">

      | Field | Setting |
      |-----------|---------|
      | **Name** | Last_Name |
      | **Include in token type** | ID Token → Always |
      | **Value type** | Expression |
      | **Value** | `user.lastName` |
      | **Include in** | Any scope (or Profile) |
          
      </Tab>

      <Tab title="Role">

      | Field | Setting |
      |-----------|---------|
      | **Name** | Role |
      | **Include in token type** | ID Token → Always |
      | **Value type** | Groups |
      | **Filter** | Starts with --> `bh-` |
      | **Include in** | Any scope (or Profile) |
      </Tab>
    </Tabs>
  </Step>
</Steps>

<snip_auth_config_1 auth_mode="OIDC" endpoint="callback"/>

<snip_auth_config_2 auth_mode="OIDC" endpoint="callback"/>

<snip_auth_users auth_mode="OIDC"/>